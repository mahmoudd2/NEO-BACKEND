"use strict";

const service = require('./service');
exports.login = async (req, res) => {
  const {
    email,
    password
  } = req.body || {};
  if (!email || !password) return res.status(400).json({
    message: 'Email and password are required'
  });
  try {
    const result = await service.login(email, password);
    if (!result.ok) return res.status(401).json({
      message: result.message
    });
    res.json(result);
  } catch (e) {
    console.error(e);
    res.status(500).json({
      message: 'Server error'
    });
  }
};
exports.getDashboard = async (_req, res, next) => {
  try {
    const data = await service.dashboard();
    res.json(data);
  } catch (e) {
    next(e);
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXJ2aWNlIiwicmVxdWlyZSIsImV4cG9ydHMiLCJsb2dpbiIsInJlcSIsInJlcyIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJyZXN1bHQiLCJvayIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJnZXREYXNoYm9hcmQiLCJfcmVxIiwibmV4dCIsImRhdGEiLCJkYXNoYm9hcmQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbW9kdWxlcy9hZG1pbi9jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNlcnZpY2UgPSByZXF1aXJlKCcuL3NlcnZpY2UnKTtcclxuXHJcbmV4cG9ydHMubG9naW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHkgfHwge307XHJcbiAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdFbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkJyB9KTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UubG9naW4oZW1haWwsIHBhc3N3b3JkKTtcclxuICAgIGlmICghcmVzdWx0Lm9rKSByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiByZXN1bHQubWVzc2FnZSB9KTtcclxuICAgIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ1NlcnZlciBlcnJvcicgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXREYXNoYm9hcmQgPSBhc3luYyAoX3JlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzZXJ2aWNlLmRhc2hib2FyZCgpO1xyXG4gICAgcmVzLmpzb24oZGF0YSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgbmV4dChlKTtcclxuICB9XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFFcENDLE9BQU8sQ0FBQ0MsS0FBSyxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2xDLE1BQU07SUFBRUMsS0FBSztJQUFFQztFQUFTLENBQUMsR0FBR0gsR0FBRyxDQUFDSSxJQUFJLElBQUksQ0FBQyxDQUFDO0VBQzFDLElBQUksQ0FBQ0YsS0FBSyxJQUFJLENBQUNDLFFBQVEsRUFBRSxPQUFPRixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQUVDLE9BQU8sRUFBRTtFQUFrQyxDQUFDLENBQUM7RUFFcEcsSUFBSTtJQUNGLE1BQU1DLE1BQU0sR0FBRyxNQUFNWixPQUFPLENBQUNHLEtBQUssQ0FBQ0csS0FBSyxFQUFFQyxRQUFRLENBQUM7SUFDbkQsSUFBSSxDQUFDSyxNQUFNLENBQUNDLEVBQUUsRUFBRSxPQUFPUixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRUMsTUFBTSxDQUFDRDtJQUFRLENBQUMsQ0FBQztJQUN4RU4sR0FBRyxDQUFDSyxJQUFJLENBQUNFLE1BQU0sQ0FBQztFQUNsQixDQUFDLENBQUMsT0FBT0UsQ0FBQyxFQUFFO0lBQ1ZDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDRixDQUFDLENBQUM7SUFDaEJULEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFO0lBQWUsQ0FBQyxDQUFDO0VBQ25EO0FBQ0YsQ0FBQztBQUVEVCxPQUFPLENBQUNlLFlBQVksR0FBRyxPQUFPQyxJQUFJLEVBQUViLEdBQUcsRUFBRWMsSUFBSSxLQUFLO0VBQ2hELElBQUk7SUFDRixNQUFNQyxJQUFJLEdBQUcsTUFBTXBCLE9BQU8sQ0FBQ3FCLFNBQVMsQ0FBQyxDQUFDO0lBQ3RDaEIsR0FBRyxDQUFDSyxJQUFJLENBQUNVLElBQUksQ0FBQztFQUNoQixDQUFDLENBQUMsT0FBT04sQ0FBQyxFQUFFO0lBQ1ZLLElBQUksQ0FBQ0wsQ0FBQyxDQUFDO0VBQ1Q7QUFDRixDQUFDIiwiaWdub3JlTGlzdCI6W119