"use strict";

require('dotenv').config();
const app = require('./app');
const db = require('./config/knex');
const PORT = process.env.PORT || 5000;
(async () => {
  try {
    await db.raw('select 1+1 as result'); // quick connection check
    console.log('âœ… DB connected');
    app.listen(PORT, () => console.log(`ðŸš€ API running on port ${PORT}`));
  } catch (e) {
    console.error('âŒ Startup error:', e);
    process.exit(1);
  }
})();
process.on('SIGINT', async () => {
  await db.destroy();
  process.exit(0);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiYXBwIiwiZGIiLCJQT1JUIiwicHJvY2VzcyIsImVudiIsInJhdyIsImNvbnNvbGUiLCJsb2ciLCJsaXN0ZW4iLCJlIiwiZXJyb3IiLCJleGl0Iiwib24iLCJkZXN0cm95Il0sInNvdXJjZXMiOlsiLi4vc3JjL3NlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcclxuY29uc3QgYXBwID0gcmVxdWlyZSgnLi9hcHAnKTtcclxuY29uc3QgZGIgPSByZXF1aXJlKCcuL2NvbmZpZy9rbmV4Jyk7XHJcblxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA1MDAwO1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgZGIucmF3KCdzZWxlY3QgMSsxIGFzIHJlc3VsdCcpOyAvLyBxdWljayBjb25uZWN0aW9uIGNoZWNrXHJcbiAgICBjb25zb2xlLmxvZygn4pyFIERCIGNvbm5lY3RlZCcpO1xyXG4gICAgYXBwLmxpc3RlbihQT1JULCAoKSA9PiBjb25zb2xlLmxvZyhg8J+agCBBUEkgcnVubmluZyBvbiBwb3J0ICR7UE9SVH1gKSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIFN0YXJ0dXAgZXJyb3I6JywgZSk7XHJcbiAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgfVxyXG59KSgpO1xyXG5cclxucHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xyXG4gIGF3YWl0IGRiLmRlc3Ryb3koKTtcclxuICBwcm9jZXNzLmV4aXQoMCk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFDMUIsTUFBTUMsR0FBRyxHQUFHRixPQUFPLENBQUMsT0FBTyxDQUFDO0FBQzVCLE1BQU1HLEVBQUUsR0FBR0gsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUVuQyxNQUFNSSxJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixJQUFJLElBQUksSUFBSTtBQUVyQyxDQUFDLFlBQVk7RUFDWCxJQUFJO0lBQ0YsTUFBTUQsRUFBRSxDQUFDSSxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO0lBQ3RDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQztJQUM3QlAsR0FBRyxDQUFDUSxNQUFNLENBQUNOLElBQUksRUFBRSxNQUFNSSxPQUFPLENBQUNDLEdBQUcsQ0FBQywwQkFBMEJMLElBQUksRUFBRSxDQUFDLENBQUM7RUFDdkUsQ0FBQyxDQUFDLE9BQU9PLENBQUMsRUFBRTtJQUNWSCxPQUFPLENBQUNJLEtBQUssQ0FBQyxrQkFBa0IsRUFBRUQsQ0FBQyxDQUFDO0lBQ3BDTixPQUFPLENBQUNRLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDakI7QUFDRixDQUFDLEVBQUUsQ0FBQztBQUVKUixPQUFPLENBQUNTLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBWTtFQUMvQixNQUFNWCxFQUFFLENBQUNZLE9BQU8sQ0FBQyxDQUFDO0VBQ2xCVixPQUFPLENBQUNRLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDakIsQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119