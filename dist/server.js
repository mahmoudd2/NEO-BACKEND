"use strict";

const path = require('path'); // âœ… add this line
require('dotenv').config({
  path: path.resolve(process.cwd(), '.env')
});
const app = require('./app');
const db = require('./config/knex');
const PORT = process.env.PORT || 5000;
(async () => {
  try {
    await db.raw('select 1+1 as result'); // quick connection check
    console.log('âœ… DB connected');
    app.listen(PORT, () => console.log(`ðŸš€ API running on port ${PORT}`));
  } catch (e) {
    console.error('âŒ Startup error:', e);
    process.exit(1);
  }
})();
process.on('SIGINT', async () => {
  await db.destroy();
  process.exit(0);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImNvbmZpZyIsInJlc29sdmUiLCJwcm9jZXNzIiwiY3dkIiwiYXBwIiwiZGIiLCJQT1JUIiwiZW52IiwicmF3IiwiY29uc29sZSIsImxvZyIsImxpc3RlbiIsImUiLCJlcnJvciIsImV4aXQiLCJvbiIsImRlc3Ryb3kiXSwic291cmNlcyI6WyIuLi9zcmMvc2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g4pyFIGFkZCB0aGlzIGxpbmVcclxucmVxdWlyZSgnZG90ZW52JykuY29uZmlnKHsgcGF0aDogcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52JykgfSk7XHJcblxyXG5jb25zdCBhcHAgPSByZXF1aXJlKCcuL2FwcCcpO1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoJy4vY29uZmlnL2tuZXgnKTtcclxuXHJcbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDUwMDA7XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBkYi5yYXcoJ3NlbGVjdCAxKzEgYXMgcmVzdWx0Jyk7IC8vIHF1aWNrIGNvbm5lY3Rpb24gY2hlY2tcclxuICAgIGNvbnNvbGUubG9nKCfinIUgREIgY29ubmVjdGVkJyk7XHJcbiAgICBhcHAubGlzdGVuKFBPUlQsICgpID0+IGNvbnNvbGUubG9nKGDwn5qAIEFQSSBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgU3RhcnR1cCBlcnJvcjonLCBlKTtcclxuICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICB9XHJcbn0pKCk7XHJcblxyXG5wcm9jZXNzLm9uKCdTSUdJTlQnLCBhc3luYyAoKSA9PiB7XHJcbiAgYXdhaXQgZGIuZGVzdHJveSgpO1xyXG4gIHByb2Nlc3MuZXhpdCgwKTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUEyQjtBQUN4REEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLENBQUM7RUFBRUYsSUFBSSxFQUFFQSxJQUFJLENBQUNHLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE1BQU07QUFBRSxDQUFDLENBQUM7QUFFdkUsTUFBTUMsR0FBRyxHQUFHTCxPQUFPLENBQUMsT0FBTyxDQUFDO0FBQzVCLE1BQU1NLEVBQUUsR0FBR04sT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUVuQyxNQUFNTyxJQUFJLEdBQUdKLE9BQU8sQ0FBQ0ssR0FBRyxDQUFDRCxJQUFJLElBQUksSUFBSTtBQUVyQyxDQUFDLFlBQVk7RUFDWCxJQUFJO0lBQ0YsTUFBTUQsRUFBRSxDQUFDRyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO0lBQ3RDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQztJQUM3Qk4sR0FBRyxDQUFDTyxNQUFNLENBQUNMLElBQUksRUFBRSxNQUFNRyxPQUFPLENBQUNDLEdBQUcsQ0FBQywwQkFBMEJKLElBQUksRUFBRSxDQUFDLENBQUM7RUFDdkUsQ0FBQyxDQUFDLE9BQU9NLENBQUMsRUFBRTtJQUNWSCxPQUFPLENBQUNJLEtBQUssQ0FBQyxrQkFBa0IsRUFBRUQsQ0FBQyxDQUFDO0lBQ3BDVixPQUFPLENBQUNZLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDakI7QUFDRixDQUFDLEVBQUUsQ0FBQztBQUVKWixPQUFPLENBQUNhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBWTtFQUMvQixNQUFNVixFQUFFLENBQUNXLE9BQU8sQ0FBQyxDQUFDO0VBQ2xCZCxPQUFPLENBQUNZLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDakIsQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119