"use strict";

const nodemailer = require('nodemailer');
const transporter = nodemailer.createTransport({
  host: process.env.SMTP_HOST,
  port: Number(process.env.SMTP_PORT || 587),
  secure: String(process.env.SMTP_SECURE).toLowerCase() === 'true',
  // true for 465
  auth: {
    user: process.env.SMTP_USER,
    pass: process.env.SMTP_PASS
  }
});

// quick self-test on boot (won't crash app)
transporter.verify().then(() => console.log('ðŸ“§ Mailer ready'), err => console.warn('ðŸ“§ Mailer not ready:', err.message));
async function sendMail({
  to,
  subject,
  text,
  html,
  from
}) {
  return transporter.sendMail({
    from: from || process.env.EMAIL_FROM,
    to,
    subject,
    text,
    html
  });
}
module.exports = {
  sendMail
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwicmVxdWlyZSIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJTTVRQX0hPU1QiLCJwb3J0IiwiTnVtYmVyIiwiU01UUF9QT1JUIiwic2VjdXJlIiwiU3RyaW5nIiwiU01UUF9TRUNVUkUiLCJ0b0xvd2VyQ2FzZSIsImF1dGgiLCJ1c2VyIiwiU01UUF9VU0VSIiwicGFzcyIsIlNNVFBfUEFTUyIsInZlcmlmeSIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiZXJyIiwid2FybiIsIm1lc3NhZ2UiLCJzZW5kTWFpbCIsInRvIiwic3ViamVjdCIsInRleHQiLCJodG1sIiwiZnJvbSIsIkVNQUlMX0ZST00iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL21haWxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBub2RlbWFpbGVyID0gcmVxdWlyZSgnbm9kZW1haWxlcicpO1xyXG5cclxuY29uc3QgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuU01UUF9IT1NULFxyXG4gIHBvcnQ6IE51bWJlcihwcm9jZXNzLmVudi5TTVRQX1BPUlQgfHwgNTg3KSxcclxuICBzZWN1cmU6IFN0cmluZyhwcm9jZXNzLmVudi5TTVRQX1NFQ1VSRSkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnLCAvLyB0cnVlIGZvciA0NjVcclxuICBhdXRoOiB7XHJcbiAgICB1c2VyOiBwcm9jZXNzLmVudi5TTVRQX1VTRVIsXHJcbiAgICBwYXNzOiBwcm9jZXNzLmVudi5TTVRQX1BBU1NcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gcXVpY2sgc2VsZi10ZXN0IG9uIGJvb3QgKHdvbid0IGNyYXNoIGFwcClcclxudHJhbnNwb3J0ZXIudmVyaWZ5KCkudGhlbihcclxuICAoKSA9PiBjb25zb2xlLmxvZygn8J+TpyBNYWlsZXIgcmVhZHknKSxcclxuICAoZXJyKSA9PiBjb25zb2xlLndhcm4oJ/Cfk6cgTWFpbGVyIG5vdCByZWFkeTonLCBlcnIubWVzc2FnZSlcclxuKTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRNYWlsKHsgdG8sIHN1YmplY3QsIHRleHQsIGh0bWwsIGZyb20gfSkge1xyXG4gIHJldHVybiB0cmFuc3BvcnRlci5zZW5kTWFpbCh7XHJcbiAgICBmcm9tOiBmcm9tIHx8IHByb2Nlc3MuZW52LkVNQUlMX0ZST00sXHJcbiAgICB0byxcclxuICAgIHN1YmplY3QsXHJcbiAgICB0ZXh0LFxyXG4gICAgaHRtbFxyXG4gIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgc2VuZE1haWwgfTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFVBQVUsR0FBR0MsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUV4QyxNQUFNQyxXQUFXLEdBQUdGLFVBQVUsQ0FBQ0csZUFBZSxDQUFDO0VBQzdDQyxJQUFJLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxTQUFTO0VBQzNCQyxJQUFJLEVBQUVDLE1BQU0sQ0FBQ0osT0FBTyxDQUFDQyxHQUFHLENBQUNJLFNBQVMsSUFBSSxHQUFHLENBQUM7RUFDMUNDLE1BQU0sRUFBRUMsTUFBTSxDQUFDUCxPQUFPLENBQUNDLEdBQUcsQ0FBQ08sV0FBVyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDLEtBQUssTUFBTTtFQUFFO0VBQ2xFQyxJQUFJLEVBQUU7SUFDSkMsSUFBSSxFQUFFWCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1csU0FBUztJQUMzQkMsSUFBSSxFQUFFYixPQUFPLENBQUNDLEdBQUcsQ0FBQ2E7RUFDcEI7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQWpCLFdBQVcsQ0FBQ2tCLE1BQU0sQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FDdkIsTUFBTUMsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsRUFDbkNDLEdBQUcsSUFBS0YsT0FBTyxDQUFDRyxJQUFJLENBQUMsc0JBQXNCLEVBQUVELEdBQUcsQ0FBQ0UsT0FBTyxDQUMzRCxDQUFDO0FBRUQsZUFBZUMsUUFBUUEsQ0FBQztFQUFFQyxFQUFFO0VBQUVDLE9BQU87RUFBRUMsSUFBSTtFQUFFQyxJQUFJO0VBQUVDO0FBQUssQ0FBQyxFQUFFO0VBQ3pELE9BQU85QixXQUFXLENBQUN5QixRQUFRLENBQUM7SUFDMUJLLElBQUksRUFBRUEsSUFBSSxJQUFJM0IsT0FBTyxDQUFDQyxHQUFHLENBQUMyQixVQUFVO0lBQ3BDTCxFQUFFO0lBQ0ZDLE9BQU87SUFDUEMsSUFBSTtJQUNKQztFQUNGLENBQUMsQ0FBQztBQUNKO0FBRUFHLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQUVSO0FBQVMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==