"use strict";

const path = require('path');
require('dotenv').config({
  path: path.resolve(process.cwd(), '.env')
});
const nodemailer = require('nodemailer');
const transporter = nodemailer.createTransport({
  host: process.env.SMTP_HOST,
  port: Number(process.env.SMTP_PORT || 587),
  secure: String(process.env.SMTP_SECURE).toLowerCase() === 'true',
  // true for 465
  auth: {
    user: process.env.SMTP_USER,
    pass: process.env.SMTP_PASS
  }
});

// quick self-test on boot (won't crash app)
transporter.verify().then(() => console.log('ðŸ“§ Mailer ready'), err => console.warn('ðŸ“§ Mailer not ready:', err.message));
async function sendMail({
  to,
  subject,
  text,
  html,
  from
}) {
  return transporter.sendMail({
    from: from || process.env.EMAIL_FROM,
    to,
    subject,
    text,
    html
  });
}
module.exports = {
  sendMail
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImNvbmZpZyIsInJlc29sdmUiLCJwcm9jZXNzIiwiY3dkIiwibm9kZW1haWxlciIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsImVudiIsIlNNVFBfSE9TVCIsInBvcnQiLCJOdW1iZXIiLCJTTVRQX1BPUlQiLCJzZWN1cmUiLCJTdHJpbmciLCJTTVRQX1NFQ1VSRSIsInRvTG93ZXJDYXNlIiwiYXV0aCIsInVzZXIiLCJTTVRQX1VTRVIiLCJwYXNzIiwiU01UUF9QQVNTIiwidmVyaWZ5IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJlcnIiLCJ3YXJuIiwibWVzc2FnZSIsInNlbmRNYWlsIiwidG8iLCJzdWJqZWN0IiwidGV4dCIsImh0bWwiLCJmcm9tIiwiRU1BSUxfRlJPTSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvbWFpbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZyh7IHBhdGg6IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnLmVudicpIH0pO1xyXG5cclxuY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuXHJcbmNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gIGhvc3Q6IHByb2Nlc3MuZW52LlNNVFBfSE9TVCxcclxuICBwb3J0OiBOdW1iZXIocHJvY2Vzcy5lbnYuU01UUF9QT1JUIHx8IDU4NyksXHJcbiAgc2VjdXJlOiBTdHJpbmcocHJvY2Vzcy5lbnYuU01UUF9TRUNVUkUpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJywgLy8gdHJ1ZSBmb3IgNDY1XHJcbiAgYXV0aDoge1xyXG4gICAgdXNlcjogcHJvY2Vzcy5lbnYuU01UUF9VU0VSLFxyXG4gICAgcGFzczogcHJvY2Vzcy5lbnYuU01UUF9QQVNTXHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIHF1aWNrIHNlbGYtdGVzdCBvbiBib290ICh3b24ndCBjcmFzaCBhcHApXHJcbnRyYW5zcG9ydGVyLnZlcmlmeSgpLnRoZW4oXHJcbiAgKCkgPT4gY29uc29sZS5sb2coJ/Cfk6cgTWFpbGVyIHJlYWR5JyksXHJcbiAgKGVycikgPT4gY29uc29sZS53YXJuKCfwn5OnIE1haWxlciBub3QgcmVhZHk6JywgZXJyLm1lc3NhZ2UpXHJcbik7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzZW5kTWFpbCh7IHRvLCBzdWJqZWN0LCB0ZXh0LCBodG1sLCBmcm9tIH0pIHtcclxuICByZXR1cm4gdHJhbnNwb3J0ZXIuc2VuZE1haWwoe1xyXG4gICAgZnJvbTogZnJvbSB8fCBwcm9jZXNzLmVudi5FTUFJTF9GUk9NLFxyXG4gICAgdG8sXHJcbiAgICBzdWJqZWN0LFxyXG4gICAgdGV4dCxcclxuICAgIGh0bWxcclxuICB9KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IHNlbmRNYWlsIH07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUJBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxDQUFDO0VBQUVGLElBQUksRUFBRUEsSUFBSSxDQUFDRyxPQUFPLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRSxNQUFNO0FBQUUsQ0FBQyxDQUFDO0FBRXZFLE1BQU1DLFVBQVUsR0FBR0wsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUV4QyxNQUFNTSxXQUFXLEdBQUdELFVBQVUsQ0FBQ0UsZUFBZSxDQUFDO0VBQzdDQyxJQUFJLEVBQUVMLE9BQU8sQ0FBQ00sR0FBRyxDQUFDQyxTQUFTO0VBQzNCQyxJQUFJLEVBQUVDLE1BQU0sQ0FBQ1QsT0FBTyxDQUFDTSxHQUFHLENBQUNJLFNBQVMsSUFBSSxHQUFHLENBQUM7RUFDMUNDLE1BQU0sRUFBRUMsTUFBTSxDQUFDWixPQUFPLENBQUNNLEdBQUcsQ0FBQ08sV0FBVyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDLEtBQUssTUFBTTtFQUFFO0VBQ2xFQyxJQUFJLEVBQUU7SUFDSkMsSUFBSSxFQUFFaEIsT0FBTyxDQUFDTSxHQUFHLENBQUNXLFNBQVM7SUFDM0JDLElBQUksRUFBRWxCLE9BQU8sQ0FBQ00sR0FBRyxDQUFDYTtFQUNwQjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBaEIsV0FBVyxDQUFDaUIsTUFBTSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUN2QixNQUFNQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxFQUNuQ0MsR0FBRyxJQUFLRixPQUFPLENBQUNHLElBQUksQ0FBQyxzQkFBc0IsRUFBRUQsR0FBRyxDQUFDRSxPQUFPLENBQzNELENBQUM7QUFFRCxlQUFlQyxRQUFRQSxDQUFDO0VBQUVDLEVBQUU7RUFBRUMsT0FBTztFQUFFQyxJQUFJO0VBQUVDLElBQUk7RUFBRUM7QUFBSyxDQUFDLEVBQUU7RUFDekQsT0FBTzdCLFdBQVcsQ0FBQ3dCLFFBQVEsQ0FBQztJQUMxQkssSUFBSSxFQUFFQSxJQUFJLElBQUloQyxPQUFPLENBQUNNLEdBQUcsQ0FBQzJCLFVBQVU7SUFDcENMLEVBQUU7SUFDRkMsT0FBTztJQUNQQyxJQUFJO0lBQ0pDO0VBQ0YsQ0FBQyxDQUFDO0FBQ0o7QUFFQUcsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFBRVI7QUFBUyxDQUFDIiwiaWdub3JlTGlzdCI6W119