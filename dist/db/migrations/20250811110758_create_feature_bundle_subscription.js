"use strict";

exports.up = async knex => {
  await knex.schema.createTable('Feature', t => {
    t.increments('id').primary();
    t.string('Name', 100).notNullable();
    t.text('Description');
  });
  await knex.schema.createTable('Bundle', t => {
    t.increments('id').primary();
    t.string('Name', 100).notNullable().unique();
    t.decimal('Price', 10, 2).notNullable();
    t.text('Description');
  });
  await knex.schema.createTable('BundleFeature', t => {
    t.increments('id').primary();
    t.integer('BundleID').notNullable().references('id').inTable('Bundle');
    t.integer('FeatureID').notNullable().references('id').inTable('Feature');
  });
  await knex.schema.createTable('Subscription', t => {
    t.increments('id').primary();
    t.integer('CompanyID').notNullable().references('id').inTable('Company').onDelete('CASCADE');
    t.integer('BundleID').notNullable().references('id').inTable('Bundle').onDelete('CASCADE');
    t.date('StartDate').notNullable();
    t.date('EndDate').notNullable();
    t.string('Status', 50).notNullable();
    t.string('PaymentMethod', 50).notNullable();
  });
};
exports.down = async knex => {
  await knex.schema.dropTableIfExists('Subscription');
  await knex.schema.dropTableIfExists('BundleFeature');
  await knex.schema.dropTableIfExists('Bundle');
  await knex.schema.dropTableIfExists('Feature');
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwidXAiLCJrbmV4Iiwic2NoZW1hIiwiY3JlYXRlVGFibGUiLCJ0IiwiaW5jcmVtZW50cyIsInByaW1hcnkiLCJzdHJpbmciLCJub3ROdWxsYWJsZSIsInRleHQiLCJ1bmlxdWUiLCJkZWNpbWFsIiwiaW50ZWdlciIsInJlZmVyZW5jZXMiLCJpblRhYmxlIiwib25EZWxldGUiLCJkYXRlIiwiZG93biIsImRyb3BUYWJsZUlmRXhpc3RzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2RiL21pZ3JhdGlvbnMvMjAyNTA4MTExMTA3NThfY3JlYXRlX2ZlYXR1cmVfYnVuZGxlX3N1YnNjcmlwdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnRzLnVwID0gYXN5bmMgKGtuZXgpID0+IHtcbiAgYXdhaXQga25leC5zY2hlbWEuY3JlYXRlVGFibGUoJ0ZlYXR1cmUnLCAodCkgPT4ge1xuICAgIHQuaW5jcmVtZW50cygnaWQnKS5wcmltYXJ5KCk7XG4gICAgdC5zdHJpbmcoJ05hbWUnLCAxMDApLm5vdE51bGxhYmxlKCk7XG4gICAgdC50ZXh0KCdEZXNjcmlwdGlvbicpO1xuICB9KTtcblxuICBhd2FpdCBrbmV4LnNjaGVtYS5jcmVhdGVUYWJsZSgnQnVuZGxlJywgKHQpID0+IHtcbiAgICB0LmluY3JlbWVudHMoJ2lkJykucHJpbWFyeSgpO1xuICAgIHQuc3RyaW5nKCdOYW1lJywgMTAwKS5ub3ROdWxsYWJsZSgpLnVuaXF1ZSgpO1xuICAgIHQuZGVjaW1hbCgnUHJpY2UnLCAxMCwgMikubm90TnVsbGFibGUoKTtcbiAgICB0LnRleHQoJ0Rlc2NyaXB0aW9uJyk7XG4gIH0pO1xuXG4gIGF3YWl0IGtuZXguc2NoZW1hLmNyZWF0ZVRhYmxlKCdCdW5kbGVGZWF0dXJlJywgKHQpID0+IHtcbiAgICB0LmluY3JlbWVudHMoJ2lkJykucHJpbWFyeSgpO1xuICAgIHQuaW50ZWdlcignQnVuZGxlSUQnKS5ub3ROdWxsYWJsZSgpLnJlZmVyZW5jZXMoJ2lkJykuaW5UYWJsZSgnQnVuZGxlJyk7XG4gICAgdC5pbnRlZ2VyKCdGZWF0dXJlSUQnKS5ub3ROdWxsYWJsZSgpLnJlZmVyZW5jZXMoJ2lkJykuaW5UYWJsZSgnRmVhdHVyZScpO1xuICB9KTtcblxuICBhd2FpdCBrbmV4LnNjaGVtYS5jcmVhdGVUYWJsZSgnU3Vic2NyaXB0aW9uJywgKHQpID0+IHtcbiAgICB0LmluY3JlbWVudHMoJ2lkJykucHJpbWFyeSgpO1xuICAgIHQuaW50ZWdlcignQ29tcGFueUlEJykubm90TnVsbGFibGUoKS5yZWZlcmVuY2VzKCdpZCcpLmluVGFibGUoJ0NvbXBhbnknKS5vbkRlbGV0ZSgnQ0FTQ0FERScpO1xuICAgIHQuaW50ZWdlcignQnVuZGxlSUQnKS5ub3ROdWxsYWJsZSgpLnJlZmVyZW5jZXMoJ2lkJykuaW5UYWJsZSgnQnVuZGxlJykub25EZWxldGUoJ0NBU0NBREUnKTtcbiAgICB0LmRhdGUoJ1N0YXJ0RGF0ZScpLm5vdE51bGxhYmxlKCk7XG4gICAgdC5kYXRlKCdFbmREYXRlJykubm90TnVsbGFibGUoKTtcbiAgICB0LnN0cmluZygnU3RhdHVzJywgNTApLm5vdE51bGxhYmxlKCk7XG4gICAgdC5zdHJpbmcoJ1BheW1lbnRNZXRob2QnLCA1MCkubm90TnVsbGFibGUoKTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLmRvd24gPSBhc3luYyAoa25leCkgPT4ge1xuICBhd2FpdCBrbmV4LnNjaGVtYS5kcm9wVGFibGVJZkV4aXN0cygnU3Vic2NyaXB0aW9uJyk7XG4gIGF3YWl0IGtuZXguc2NoZW1hLmRyb3BUYWJsZUlmRXhpc3RzKCdCdW5kbGVGZWF0dXJlJyk7XG4gIGF3YWl0IGtuZXguc2NoZW1hLmRyb3BUYWJsZUlmRXhpc3RzKCdCdW5kbGUnKTtcbiAgYXdhaXQga25leC5zY2hlbWEuZHJvcFRhYmxlSWZFeGlzdHMoJ0ZlYXR1cmUnKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUFBLE9BQU8sQ0FBQ0MsRUFBRSxHQUFHLE1BQU9DLElBQUksSUFBSztFQUMzQixNQUFNQSxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsV0FBVyxDQUFDLFNBQVMsRUFBR0MsQ0FBQyxJQUFLO0lBQzlDQSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLENBQUM7SUFDNUJGLENBQUMsQ0FBQ0csTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUM7SUFDbkNKLENBQUMsQ0FBQ0ssSUFBSSxDQUFDLGFBQWEsQ0FBQztFQUN2QixDQUFDLENBQUM7RUFFRixNQUFNUixJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsV0FBVyxDQUFDLFFBQVEsRUFBR0MsQ0FBQyxJQUFLO0lBQzdDQSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLENBQUM7SUFDNUJGLENBQUMsQ0FBQ0csTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUMsQ0FBQ0UsTUFBTSxDQUFDLENBQUM7SUFDNUNOLENBQUMsQ0FBQ08sT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUNILFdBQVcsQ0FBQyxDQUFDO0lBQ3ZDSixDQUFDLENBQUNLLElBQUksQ0FBQyxhQUFhLENBQUM7RUFDdkIsQ0FBQyxDQUFDO0VBRUYsTUFBTVIsSUFBSSxDQUFDQyxNQUFNLENBQUNDLFdBQVcsQ0FBQyxlQUFlLEVBQUdDLENBQUMsSUFBSztJQUNwREEsQ0FBQyxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUNDLE9BQU8sQ0FBQyxDQUFDO0lBQzVCRixDQUFDLENBQUNRLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQ0osV0FBVyxDQUFDLENBQUMsQ0FBQ0ssVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDQyxPQUFPLENBQUMsUUFBUSxDQUFDO0lBQ3RFVixDQUFDLENBQUNRLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQ0osV0FBVyxDQUFDLENBQUMsQ0FBQ0ssVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDQyxPQUFPLENBQUMsU0FBUyxDQUFDO0VBQzFFLENBQUMsQ0FBQztFQUVGLE1BQU1iLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxXQUFXLENBQUMsY0FBYyxFQUFHQyxDQUFDLElBQUs7SUFDbkRBLENBQUMsQ0FBQ0MsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUM1QkYsQ0FBQyxDQUFDUSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUNKLFdBQVcsQ0FBQyxDQUFDLENBQUNLLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDQyxRQUFRLENBQUMsU0FBUyxDQUFDO0lBQzVGWCxDQUFDLENBQUNRLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQ0osV0FBVyxDQUFDLENBQUMsQ0FBQ0ssVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUNDLFFBQVEsQ0FBQyxTQUFTLENBQUM7SUFDMUZYLENBQUMsQ0FBQ1ksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDUixXQUFXLENBQUMsQ0FBQztJQUNqQ0osQ0FBQyxDQUFDWSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUNSLFdBQVcsQ0FBQyxDQUFDO0lBQy9CSixDQUFDLENBQUNHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQ3BDSixDQUFDLENBQUNHLE1BQU0sQ0FBQyxlQUFlLEVBQUUsRUFBRSxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0VBQzdDLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRFQsT0FBTyxDQUFDa0IsSUFBSSxHQUFHLE1BQU9oQixJQUFJLElBQUs7RUFDN0IsTUFBTUEsSUFBSSxDQUFDQyxNQUFNLENBQUNnQixpQkFBaUIsQ0FBQyxjQUFjLENBQUM7RUFDbkQsTUFBTWpCLElBQUksQ0FBQ0MsTUFBTSxDQUFDZ0IsaUJBQWlCLENBQUMsZUFBZSxDQUFDO0VBQ3BELE1BQU1qQixJQUFJLENBQUNDLE1BQU0sQ0FBQ2dCLGlCQUFpQixDQUFDLFFBQVEsQ0FBQztFQUM3QyxNQUFNakIsSUFBSSxDQUFDQyxNQUFNLENBQUNnQixpQkFBaUIsQ0FBQyxTQUFTLENBQUM7QUFDaEQsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==